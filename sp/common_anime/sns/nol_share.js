var NHKSNS=function(){"use strict";function e(e){e=e||{};var i,r,o,a,u,d,c={},p=!1;i=t(),r="",f.SNS.resources.facebook.redirects=e["facebook-redirects"]||f.SNS.resources.facebook.redirects;var g=document.createElement("style");try{g.innerHTML=h}catch(m){g.setAttribute("type","text/css"),g.styleSheet.cssText=h}for(document.getElementsByTagName("head")[0].appendChild(g),document.documentMode&&document.documentMode<=10&&(!window.external||"undefined"==typeof window.external.msActiveXFilteringEnabled&&"unknown"!=typeof window.external.msActiveXFilteringEnabled||window.external.msActiveXFilteringEnabled()===!1&&(p=!0)),o=0;o<i.length;o++)if(!p){for(var b in f.separatableOptions){var k=i[o].getAttribute("data-nhksns-"+b);switch(b){case"url":k=k||e.url||l("og:url")||l("shorturl")||location.href;break;case"title":k=k||e.title||l("og:title")||l("title")||document.title||"";break;case"description":k=k||e.description||l("og:description")||l("description")||"";break;case"image":k=k||e.image||l("og:image")||"";break;default:k=k||e[b]}k&&s(b,k)?c[b]=k:c[b]=f.defaultOptions[b]||""}if(p)return;a=new RegExp(/^https?\:\/\/([^\/.]+\.)*nhk1s\.jp\/.*/),u=new RegExp(/^https?\:\/\/([^\/.]+\.)*nhk-ondemand\.jp\/.*/),d=new RegExp(/^https?\:\/\/([^\/.]+\.)*nhk(\.or)?\.jp\/.*/),c.url.match(a)||c.url.match(u)||c.url.match(d)||(c.url=f.defaultUrl,c.title=f.defaultTitle,c.description=f.defaultDesciption),c.title=encodeURIComponent(c.title),c.description=encodeURIComponent(c.description),i[o].innerHTML=n(i[o],c)}}function t(){var e,t,n;if(document.getElementsByClassName)return document.getElementsByClassName(f.needleClassName);for(e=document.getElementsByTagName("div"),t=[],n=0;n<e.length;n++)e[n].hasAttribute(f.needleClassName)&&t.push(e[n]);return t}function n(e,t){var n,o,l,p="";for(n=t.lang,a(t)&&(p+='<p class="nhksns-guide" style="display: block;">'+f.guides[n]+i("help",t)+"</p>"),u(t)&&(p+='<p class="nhksns-guide" style="display: inline-block; margin-right: 12px;">'+f.guides[n]+i("help",t)+"</p>"),e.attributes["class"].value+=" nhksns-icon-"+t.iconsize,p+='<ul class="nhksns">',o=0;o<f.SNS.defaults.length;o++)l=f.SNS.defaults[o],"line"==l&&r()||t.disable.match(new RegExp(l))&&s("disable",l)||(p+=i(l,t));return p+="</ul>",d(t)&&(p+='<p class="nhksns-guide">'+f.guides[n]+i("help",t)+"</p>"),c(t)&&(p+='<p class="nhksns-guide" style="display:inline-block; margin-left: 12px;">'+f.guides[n]+i("help",t)+"</p>"),p}function i(e,t){var n="",i='<li class="nhksns-{name}"><a href="{href}" {sendMetrics} target="_blank"><img  src="{img}" alt="{name}"></img></a>',r=f.SNS.resources[e];switch(e){case"twitter":return p(i,{href:p(r.link,{url:t.url,text:t.title,description:t.description}),name:e,img:r.image,sendMetrics:o(e)});case"facebook":return p(i,{href:p(r.link,{app_id:r.appId,url:t.url,description:t.description,text:t.title,image:t.image,redirects:r.redirects}),name:e,img:r.image,sendMetrics:o(e)});case"google":return p(i,{href:p(r.link,{url:t.url}),name:e,img:r.image,sendMetrics:o(e)});case"line":return p(i,{href:p(r.link,{url:t.url,text:t.title}),name:e,img:r.image,sendMetrics:o(e)});case"help":var s='<a class="nhksns-help" href="{href}" target="_blank"><img src="{img}" alt="help"></img></a>';return p(s,{href:r.link[t.lang],img:r.image})}return n}function r(){return"function"!=typeof m?!0:"iphone"!==m()[1]&&"androidmobile"!==m()[1]}function s(e,t){var n,i=f.separatableOptions[e];if(void 0===i)return!1;if(null===i)return!0;if("function"==typeof Array.prototype.indexOf)return-1!=i.indexOf(t);for(n=0;n<i.length;n++)if(i[n]===t)return!0;return!1}function o(e){return"function"==typeof _tc_onClick?p("onClick=\"_tc_onClick(s_omni,{},'SNS_Button_{service}')\"",{service:e}):""}function l(e){for(var t=document.getElementsByTagName("meta"),n=0;n<t.length;n++){if(t[n].hasAttribute("property")&&t[n].attributes.property.value==e)return t[n].content;if(t[n].hasAttribute("name")&&t[n].attributes.name.value==e)return t[n].content}}function a(e){return"nothing"===e.guidepos?!1:!(!e.guidepos||"top"!=e.guidepos)}function u(e){return"nothing"===e.guidepos?!1:!((!e.guidepos||"left"!=e.guidepos)&&s("guidepos",e.guidepos))}function d(e){return"nothing"===e.guidepos?!1:!(!e.guidepos||"bottom"!=e.guidepos)}function c(e){return"nothing"===e.guidepos?!1:!(!e.guidepos||"right"!=e.guidepos)}function p(e,t){for(var n in t){if("object"==typeof t[n])throw new TypeError("param is not to be Object");var i=new RegExp("{"+n+"}","g");e=e.replace(i,t[n])}return e}function g(t){window.addEventListener("DOMContentLoaded",function(){e(t)})}var m,h=".nhk-snsbtn { margin-bottom: 15px; } ul.nhksns { list-style:none; display: inline; padding-left: 0; } ul.nhksns > li { display: inline-block; vertical-align: middle; margin: 0.2em; } .nhksns-icon-s img { width:24px; } .nhksns-icon-m img { width: 32px; } .nhksns-icon-l img { width:40px; } .nhksns-help img { margin-left:6px; width: 18px; border: 1px solid #999; vertical-align: middle; }  img { border: none; } .nhksns-guide { vertical-align:middle; margin: 0 0 6px 0; font-weight: bold; } .nhksns img { border: none; }",f={};return window.addEventListener("DOMContentLoaded",function(){m=window.nol_getDeviceType||null},!0),f.baseDir=p("{protocol}../common/sns/",{protocol:location.protocol}),f.needleClassName="nhk-snsbtn",f.baseClaasName="nhk-snsbtn",f.SNS={},f.SNS.resources={twitter:{link:"https://twitter.com/intent/tweet?text={text}%20{description}&url={url}",image:f.baseDir+"img/twitter.png"},facebook:{link:"https://www.facebook.com/dialog/share?app_id={app_id}&display=popup&href={url}&redirect_uri={redirects}",image:f.baseDir+"img/facebook.png",appId:"1491428781178288",redirects:"https://www.facebook.com"},line:{link:"line://msg/text/{text}%20{url}",image:f.baseDir+"img/line.png"},google:{link:"https://plus.google.com/share?url={url}",image:f.baseDir+"img/google.png"},help:{link:{ja:f.baseDir+"help.html",en:f.baseDir+"help_en.html"},image:f.baseDir+"img/help.png"}},f.SNS.defaults=["twitter","facebook","google","line"],f.guides={ja:"シェアする",en:"Share"},f.separatableOptions={disable:["google","line","google line"],lang:["ja","en"],guidepos:["left","bottom","right","top","nothing"],iconsize:["s","m","l"],description:null,title:null,url:null},f.defaultOptions={lang:"ja",iconsize:"m"},f.satisfiedOptions={},f.defaultUrl="http://www.nhk.or.jp/",f.defaultTitle="NHKオンライン",f.defaultDesciption="",{initSNSOnLoad:g,initSNS:e}}();
